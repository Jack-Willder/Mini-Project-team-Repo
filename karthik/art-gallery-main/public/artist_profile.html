<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>My Profile</title>
    <link rel="stylesheet" href="artist_profile.css">
</head>

<body>
    <div class="title">
        <a href="artist_dashboard.html" class="back-btn">Back</a>
        <h1>Atist Profile</h1>
    </div>
    <div class="profile-container">
        <!-- Artist Profile Card -->
        <div class="artist-info-card">
            <img id="profileImage" src="default.jpg" alt="Profile Image">
            <h2 id="artistName">Artist Name</h2>
            <p id="artistBio">Artist bio will appear here...</p>
        </div>

        <h3>My Artworks</h3>
        <div class="gallery" id="artworksContainer"></div>
    </div>

    <script>
        async function loadProfile() {
            const response = await fetch("/artists/me");
            if (!response.ok) {
                alert("❌ Failed to load profile");
                return;
            }

            const data = await response.json();
            document.getElementById("profileImage").src = data.artist.profile_image || "default.jpg";
            document.getElementById("artistName").textContent = data.artist.name || data.artist.username;
            document.getElementById("artistBio").textContent = data.artist.bio || "No bio yet.";

            const artworksContainer = document.getElementById("artworksContainer");
            artworksContainer.innerHTML = "";

            data.artworks.forEach(art => {
                artworksContainer.innerHTML += `
          <div class="card">
          <img src="/uploads/${art.image}" alt="${art.title}">
            <h3>${art.title}</h3>
          </div>
        `;
            });
        }

        loadProfile();
    </script>
</body>

</html>